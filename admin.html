<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Traowl</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-bg: #ecf0f1;
        }

        body {
            background-color: var(--light-bg);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .sidebar {
            background: linear-gradient(135deg, var(--primary-color), #34495e);
            min-height: 100vh;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 15px 20px;
            border-radius: 8px;
            margin: 5px 10px;
            transition: all 0.3s ease;
        }

        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            background-color: rgba(255,255,255,0.1);
            color: white;
            transform: translateX(5px);
        }

        .main-content {
            padding: 20px;
        }

        .dashboard-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-2px);
        }

        .stat-card {
            text-align: center;
            padding: 30px;
            border-radius: 15px;
            color: white;
            margin-bottom: 20px;
        }

        .stat-card.users { background: linear-gradient(135deg, var(--secondary-color), #2980b9); }
        .stat-card.bookings { background: linear-gradient(135deg, var(--success-color), #229954); }
        .stat-card.trips { background: linear-gradient(135deg, var(--warning-color), #d68910); }
        .stat-card.messages { background: linear-gradient(135deg, var(--danger-color), #c0392b); }

        .table-responsive {
            max-height: 500px;
            overflow-y: auto;
        }

        .btn-sm {
            margin: 2px;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .search-filter {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .badge-status {
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8em;
        }

        .modal-content {
            border-radius: 15px;
        }

        .json-editor {
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        /* Content Management Styles */
        .banner-preview {
            position: relative;
            max-height: 200px;
            overflow: hidden;
            border-radius: 8px;
        }

        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .banner-preview:hover .banner-overlay {
            opacity: 1;
        }

        .media-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .media-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .media-item img {
            width: 100%;
            height: 100px;
            object-fit: cover;
        }

        .media-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .media-item:hover .media-item-overlay {
            opacity: 1;
        }

        .upload-zone {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .upload-zone:hover {
            border-color: var(--primary-color);
        }

        .rich-editor {
            min-height: 400px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        /* Visual Trip Management Styles */
        .visual-trips-container {
            max-height: 600px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .trip-card-visual {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .trip-card-visual:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .trip-card-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px 10px 0 0;
        }

        .trip-card-content {
            padding: 15px;
        }

        .trip-card-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .trip-card-price {
            color: #ff6b35;
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .trip-card-duration {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .trip-card-destination {
            color: #495057;
            font-size: 0.9rem;
        }

        .trip-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: none;
            gap: 5px;
        }

        .trip-card-visual:hover .trip-actions {
            display: flex;
        }

        .trip-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: white;
        }

        .trip-action-edit {
            background: var(--secondary-color);
        }

        .trip-action-delete {
            background: var(--danger-color);
        }

        .trip-action-btn:hover {
            transform: scale(1.1);
        }

        #json-editor-view {
            display: none;
        }

        #json-editor-view.active {
            display: block;
        }

        .view-toggle {
            background: var(--success-color);
            color: white;
        }

        /* Improved layout consistency */
        .content-section {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .list-group-item {
            border: 1px solid #dee2e6;
            transition: all 0.2s ease;
        }

        .list-group-item:hover {
            background-color: #f8f9fa;
            transform: translateX(2px);
        }

        .list-group-item.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Preview container improvements */
        .page-preview-container {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .preview-header {
            font-weight: 500;
        }

        /* View mode control */
        #json-editor-view {
            display: none; /* Hidden by default, visual view is default */
        }
        
        #visual-trips-view {
            display: block; /* Visible by default */
        }

        /* Responsive improvements */
        @media (max-width: 768px) {
            .visual-trips-container {
                max-height: 400px;
            }
            
            .dashboard-card {
                margin-bottom: 1rem;
            }
        }

        .blog-status {
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .blog-status.published {
            background-color: #d4edda;
            color: #155724;
        }

        .blog-status.draft {
            background-color: #fff3cd;
            color: #856404;
        }

        .page-categories .list-group-item.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .section-banner-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
        }

        .current-banner-preview {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .banner-upload-btn {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .banner-upload-btn input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .banner-status {
            font-size: 0.85em;
            margin-top: 5px;
        }

        .banner-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .sidebar {
                min-height: auto;
            }
            
            .main-content {
                padding: 10px;
            }
            
            .media-gallery {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar">
                <div class="p-3">
                    <h4 class="text-white mb-4">
                        <i class="fas fa-shield-alt me-2"></i>Admin Panel
                    </h4>
                    
                    <!-- User Info Section -->
                    <div id="current-user-info" class="text-white mb-4 p-2 bg-dark bg-opacity-25 rounded">
                        <div class="d-flex align-items-center">
                            <div class="me-2">
                                <i class="fas fa-user-circle fa-lg"></i>
                            </div>
                            <div>
                                <div class="fw-bold">Loading...</div>
                                <small class="text-muted">Please wait</small>
                            </div>
                        </div>
                    </div>
                    <nav class="nav flex-column">
                        <a class="nav-link active" href="#" data-section="dashboard">
                            <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                        </a>
                        <a class="nav-link" href="#" data-section="users">
                            <i class="fas fa-users me-2"></i>Users Management
                        </a>
                        <a class="nav-link" href="#" data-section="bookings">
                            <i class="fas fa-calendar-check me-2"></i>Bookings
                        </a>
                        <a class="nav-link" href="#" data-section="trips">
                            <i class="fas fa-map-marked-alt me-2"></i>Trips & Content
                        </a>
                        <a class="nav-link" href="#" data-section="blogs">
                            <i class="fas fa-blog me-2"></i>Blog Management
                        </a>
                        <a class="nav-link" href="#" data-section="pages">
                            <i class="fas fa-file-alt me-2"></i>Page Content
                        </a>
                        <a class="nav-link" href="#" data-section="visual-editor">
                            <i class="fas fa-edit me-2"></i>Visual Editor
                        </a>

                        <a class="nav-link" href="#" data-section="messages">
                            <i class="fas fa-envelope me-2"></i>Contact Messages
                        </a>
                        <a class="nav-link" href="#" data-section="settings">
                            <i class="fas fa-cog me-2"></i>Site Settings
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 main-content">
                <!-- Dashboard Overview -->
                <div id="dashboard" class="content-section active">
                    <h2 class="mb-4">Dashboard Overview</h2>
                    
                    <div class="row">
                        <div class="col-lg-3 col-md-6">
                            <div class="stat-card users">
                                <i class="fas fa-users fa-3x mb-3"></i>
                                <h3 id="total-users">0</h3>
                                <p>Total Users</p>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="stat-card bookings">
                                <i class="fas fa-calendar-check fa-3x mb-3"></i>
                                <h3 id="total-bookings">0</h3>
                                <p>Total Bookings</p>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="stat-card trips">
                                <i class="fas fa-map-marked-alt fa-3x mb-3"></i>
                                <h3 id="total-trips">0</h3>
                                <p>Total Trips</p>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="stat-card messages">
                                <i class="fas fa-envelope fa-3x mb-3"></i>
                                <h3 id="total-messages">0</h3>
                                <p>Messages</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h5>Recent Activity</h5>
                        <div id="recent-activity">
                            <div class="text-center text-muted">
                                <div class="spinner-border" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Management -->
                <div id="users" class="content-section">
                    <h2 class="mb-4">Users Management</h2>
                    
                    <div class="search-filter">
                        <div class="row">
                            <div class="col-md-6">
                                <input type="text" class="form-control" id="user-search" placeholder="Search users...">
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="user-filter">
                                    <option value="">All Users</option>
                                    <option value="recent">Recent Users</option>
                                    <option value="oauth">OAuth Users</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary w-100" onclick="refreshUsers()">
                                    <i class="fas fa-refresh"></i> Refresh
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Join Date</th>
                                        <th>Last Login</th>
                                        <th>OAuth</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table">
                                    <!-- Users will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Bookings Management -->
                <div id="bookings" class="content-section">
                    <h2 class="mb-4">Bookings Management</h2>
                    
                    <div class="search-filter">
                        <div class="row">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="booking-search" placeholder="Search bookings...">
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="booking-status-filter">
                                    <option value="">All Status</option>
                                    <option value="pending_confirmation">Pending</option>
                                    <option value="confirmed">Confirmed</option>
                                    <option value="cancelled">Cancelled</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary" onclick="refreshBookings()">
                                    <i class="fas fa-refresh"></i> Refresh
                                </button>
                                <button class="btn btn-success" onclick="exportBookings()">
                                    <i class="fas fa-download"></i> Export
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Booking ID</th>
                                        <th>Trip</th>
                                        <th>Customer</th>
                                        <th>Travelers</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="bookings-table">
                                    <!-- Bookings will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Trips & Content Management -->
                <div id="trips" class="content-section">
                    <h2 class="mb-4">Trips & Content Management</h2>
                    
                    <div class="row">
                        <div class="col-lg-3 col-md-4">
                            <div class="dashboard-card mb-3">
                                <h6 class="mb-3"><i class="fas fa-list me-2"></i>Trip Categories</h6>
                                <div class="list-group" id="content-categories">
                                <a href="#" class="list-group-item list-group-item-action active" data-file="upcoming-trips.json">
                                    <i class="fas fa-calendar me-2"></i>Upcoming Trips
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="domestic-trips.json">
                                    <i class="fas fa-home me-2"></i>Domestic Trips
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="international-trips.json">
                                    <i class="fas fa-globe me-2"></i>International Trips
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="family-trips.json">
                                    <i class="fas fa-users me-2"></i>Family Trips
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="romantic-trips.json">
                                    <i class="fas fa-heart me-2"></i>Romantic Trips
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="corporate-trips.json">
                                    <i class="fas fa-briefcase me-2"></i>Corporate Trips
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="spiritual-tours.json">
                                    <i class="fas fa-place-of-worship me-2"></i>Spiritual Tours
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="activities.json">
                                    <i class="fas fa-mountain me-2"></i>Activities
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-file="homepage-hot-locations.json">
                                    <i class="fas fa-fire me-2"></i>Hot Locations
                                </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-9 col-md-8">
                            <!-- Visual Trip Management -->
                            <div class="dashboard-card mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5><i class="fas fa-eye me-2"></i>Visual Trip Management</h5>
                                    <div>
                                        <button id="add-trip-btn" class="btn btn-success btn-sm" onclick="showAddTripModal()">
                                            <i class="fas fa-plus me-1"></i>Add New Trip
                                        </button>
                                        <button class="btn btn-info btn-sm" onclick="toggleViewMode()">
                                            <i class="fas fa-toggle-on me-1"></i><span id="view-mode-text">Visual View</span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Visual Trip Cards View -->
                                <div id="visual-trips-view" class="visual-trips-container">
                                    <div id="visual-trips-grid" class="row">
                                        <!-- Trip cards will be loaded here -->
                                        <div class="col-12 text-center py-4">
                                            <div class="text-muted">
                                                <i class="fas fa-spinner fa-spin fa-2x mb-3"></i>
                                                <p>Loading trips...</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- JSON Editor (Traditional View) -->
                            <div class="dashboard-card" id="json-editor-view">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5 id="current-content-title">Upcoming Trips - JSON Editor</h5>
                                    <div>
                                        <button class="btn btn-success btn-sm" onclick="saveCurrentContent()">
                                            <i class="fas fa-save"></i> Save Changes
                                        </button>
                                        <button class="btn btn-secondary btn-sm" onclick="resetCurrentContent()">
                                            <i class="fas fa-undo"></i> Reset
                                        </button>
                                    </div>
                                </div>
                                <div id="content-editor">
                                    <textarea id="json-editor" class="form-control json-editor" rows="20" placeholder="Select a content category to edit..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Messages -->
                <div id="messages" class="content-section">
                    <h2 class="mb-4">Contact Messages & Support</h2>
                    
                    <div class="search-filter">
                        <div class="row">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="message-search" placeholder="Search messages...">
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="message-type-filter">
                                    <option value="">All Types</option>
                                    <option value="contact">Contact</option>
                                    <option value="support">Support</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary" onclick="refreshMessages()">
                                    <i class="fas fa-refresh"></i> Refresh
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Type</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Subject</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="messages-table">
                                    <!-- Messages will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Blog Management -->
                <div id="blogs" class="content-section">
                    <h2 class="mb-4">Blog Management</h2>
                    
                    <div class="dashboard-card">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>Blog Posts</h5>
                            <button class="btn btn-primary" onclick="showAddBlogModal()">
                                <i class="fas fa-plus"></i> Add New Blog
                            </button>
                        </div>
                        
                        <div class="search-filter mb-3">
                            <div class="row">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" id="blog-search" placeholder="Search blogs...">
                                </div>
                                <div class="col-md-4">
                                    <select class="form-select" id="blog-category-filter">
                                        <option value="">All Categories</option>
                                        <option value="travel">Travel</option>
                                        <option value="adventure">Adventure</option>
                                        <option value="culture">Culture</option>
                                        <option value="food">Food</option>
                                        <option value="tips">Tips</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <button class="btn btn-secondary" onclick="refreshBlogs()">
                                        <i class="fas fa-refresh"></i> Refresh
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Title</th>
                                        <th>Category</th>
                                        <th>Author</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="blogs-table">
                                    <!-- Blogs will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Page Content Management -->
                <div id="pages" class="content-section">
                    <h2 class="mb-4">Page Content Management</h2>
                    
                    <div class="row">
                        <div class="col-md-3">
                            <div class="list-group" id="page-categories">
                                <a href="#" class="list-group-item list-group-item-action active" data-page="about-us">
                                    <i class="fas fa-info-circle me-2"></i>About Us
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-page="home-content">
                                    <i class="fas fa-home me-2"></i>Home Page Content
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-page="footer">
                                    <i class="fas fa-footer me-2"></i>Footer Content
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-page="header">
                                    <i class="fas fa-header me-2"></i>Header Content
                                </a>
                                <a href="#" class="list-group-item list-group-item-action" data-page="policies">
                                    <i class="fas fa-file-contract me-2"></i>Policies & Terms
                                </a>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="dashboard-card">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5 id="current-page-title">About Us</h5>
                                    <div>
                                        <button class="btn btn-success btn-sm" onclick="savePageContent()">
                                            <i class="fas fa-save"></i> Save Changes
                                        </button>
                                        <button class="btn btn-secondary btn-sm" onclick="previewPageContent()">
                                            <i class="fas fa-eye"></i> Preview
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="page-content-editor">
                                    <!-- Rich text editor will be loaded here -->
                                    <div class="loading-container">
                                        <div class="spinner-border" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle"></i>
                                        Use HTML tags for formatting. Changes will be reflected immediately on the website.
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Visual Editor -->
                <div id="visual-editor" class="content-section">
                    <h2 class="mb-4">
                        <i class="fas fa-edit me-2"></i>Visual Page Editor
                    </h2>
                    
                    <div class="row mb-4">
                        <div class="col-md-8">
                            <div class="dashboard-card">
                                <h5><i class="fas fa-eye me-2"></i>Page Preview & Editing</h5>
                                <div class="form-group mb-3">
                                    <label for="visual-page-selector" class="form-label">Select Page to Edit:</label>
                                    <select class="form-select" id="visual-page-selector" onchange="loadVisualPagePreview()">
                                        <option value="">Choose a page...</option>
                                        <option value="home.html">üè† Home Page</option>
                                        <option value="spiritual-tours.html">üïâÔ∏è Spiritual Tours</option>
                                        <option value="about.html">‚ÑπÔ∏è About Us</option>
                                        <option value="activities.html">üéØ Activities</option>
                                        <option value="familytrip.html">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Trips</option>
                                        <option value="honeymoontrip.html">üíï Romantic Trips</option>
                                        <option value="weekendtrip.html">üåÖ Weekend Trips</option>
                                        <option value="corporatetrip.html">üè¢ Corporate Trips</option>
                                        <option value="blog.html">üìù Blog</option>
                                        <option value="upcomingtrip.html">üöÄ Upcoming Trips</option>
                                    </select>
                                </div>
                                
                                <div class="d-flex gap-2 mb-3">
                                    <button class="btn btn-primary" onclick="openVisualEditor()">
                                        <i class="fas fa-edit me-1"></i>Open Visual Editor
                                    </button>
                                    <button class="btn btn-info" onclick="openPagePreview()">
                                        <i class="fas fa-external-link-alt me-1"></i>Preview Page
                                    </button>
                                    <button class="btn btn-success" onclick="saveVisualChanges()">
                                        <i class="fas fa-save me-1"></i>Save All Changes
                                    </button>
                                </div>
                                
                                <div id="visual-page-preview" class="border rounded bg-light" style="min-height: 500px;">
                                    <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                                        <div class="text-center">
                                            <i class="fas fa-eye fa-3x mb-3 text-primary"></i>
                                            <h5>Select a page to preview</h5>
                                            <p class="mb-0">Choose a page from the dropdown above to start editing</p>
                                            <small class="text-muted">The page will load in preview mode with proper layout</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <h5><i class="fas fa-info-circle me-2"></i>Visual Editing Guide</h5>
                                <div class="alert alert-info">
                                    <h6>How to use Visual Editor:</h6>
                                    <ol class="mb-0 small">
                                        <li>Select a page from the dropdown</li>
                                        <li>Click "Open Visual Editor"</li>
                                        <li>Click "Enable Edit Mode" in the toolbar</li>
                                        <li>Click on any text, image, or link to edit</li>
                                        <li>Changes are saved automatically</li>
                                    </ol>
                                </div>
                                
                                <div class="alert alert-warning">
                                    <h6><i class="fas fa-exclamation-triangle me-1"></i>Features:</h6>
                                    <ul class="mb-0 small">
                                        <li>‚úÖ Edit text content inline</li>
                                        <li>‚úÖ Change images and upload new ones</li>
                                        <li>‚úÖ Modify links and navigation</li>
                                        <li>‚úÖ Real-time preview</li>
                                        <li>‚úÖ No coding required</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="dashboard-card mt-3">
                                <h5><i class="fas fa-map-marked-alt me-2"></i>Quick Trip Management</h5>
                                <div class="form-group mb-3">
                                    <label class="form-label">Trip Category:</label>
                                    <select class="form-select" id="quick-trip-category" onchange="loadQuickTrips()">
                                        <option value="spiritual-tours">Spiritual Tours</option>
                                        <option value="domestic-trips">Domestic Trips</option>
                                        <option value="international-trips">International Trips</option>
                                        <option value="family-trips">Family Trips</option>
                                        <option value="romantic-trips">Romantic Trips</option>
                                        <option value="weekend-trips">Weekend Trips</option>
                                    </select>
                                </div>
                                
                                <div class="d-flex gap-2 mb-3">
                                    <button class="btn btn-success btn-sm flex-fill" onclick="showQuickAddTrip()">
                                        <i class="fas fa-plus me-1"></i>Add Trip
                                    </button>
                                    <button class="btn btn-info btn-sm flex-fill" onclick="manageTrips()">
                                        <i class="fas fa-cog me-1"></i>Manage
                                    </button>
                                </div>
                                
                                <div id="quick-trips-list" class="small">
                                    <div class="text-muted text-center py-3">
                                        <i class="fas fa-spinner fa-spin"></i> Loading trips...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Site Settings -->
                <div id="settings" class="content-section">
                    <h2 class="mb-4">Site Settings</h2>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="dashboard-card">
                                <h5>Header Settings</h5>
                                <textarea id="header-settings" class="form-control json-editor" rows="10"></textarea>
                                <button class="btn btn-primary mt-3" onclick="saveSettings('header')">
                                    <i class="fas fa-save"></i> Save Header
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="dashboard-card">
                                <h5>Footer Settings</h5>
                                <textarea id="footer-settings" class="form-control json-editor" rows="10"></textarea>
                                <button class="btn btn-primary mt-3" onclick="saveSettings('footer')">
                                    <i class="fas fa-save"></i> Save Footer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- User Details Modal -->
    <div class="modal fade" id="userModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">User Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="user-modal-body">
                    <!-- User details will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="saveUserChanges()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Details Modal -->
    <div class="modal fade" id="bookingModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Booking Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="booking-modal-body">
                    <!-- Booking details will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="saveBookingChanges()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Details Modal -->
    <div class="modal fade" id="messageModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Message Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="message-modal-body">
                    <!-- Message details will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Blog Add/Edit Modal -->
    <div class="modal fade" id="blogModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="blog-modal-title">Add New Blog</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="blog-form">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label class="form-label">Title</label>
                                    <input type="text" class="form-control" id="blog-title" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Content</label>
                                    <textarea class="form-control rich-editor" id="blog-content" rows="15"></textarea>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Featured Image</label>
                                    <div class="image-upload-area">
                                        <img id="blog-image-preview" src="" alt="Preview" style="display: none; width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
                                        <div id="blog-image-placeholder" class="upload-zone" style="height: 200px;">
                                            <i class="fas fa-image fa-2x text-muted"></i>
                                            <p>Click to upload image</p>
                                        </div>
                                        <input type="file" id="blog-image-input" accept="image/*" style="display: none;">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Category</label>
                                    <select class="form-select" id="blog-category">
                                        <option value="travel">Travel</option>
                                        <option value="adventure">Adventure</option>
                                        <option value="culture">Culture</option>
                                        <option value="food">Food</option>
                                        <option value="tips">Tips</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Tags</label>
                                    <input type="text" class="form-control" id="blog-tags" placeholder="Separate with commas">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" id="blog-status">
                                        <option value="draft">Draft</option>
                                        <option value="published">Published</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Excerpt</label>
                                    <textarea class="form-control" id="blog-excerpt" rows="3" placeholder="Brief description..."></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveBlog()">
                        <i class="fas fa-save"></i> Save Blog
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Preview Modal -->
    <div class="modal fade" id="previewModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Content Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="preview-modal-body">
                    <!-- Preview content will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Trip Management Modal -->
    <div class="modal fade" id="tripModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tripModalTitle">Add New Trip</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="tripForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Trip Title *</label>
                                    <input type="text" class="form-control" id="trip-title" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Duration *</label>
                                    <input type="text" class="form-control" id="trip-duration" placeholder="e.g., 5 Days, 4 Nights" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Price (‚Çπ) *</label>
                                    <input type="number" class="form-control" id="trip-price" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Old Price (‚Çπ)</label>
                                    <input type="number" class="form-control" id="trip-old-price">
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Destination *</label>
                            <input type="text" class="form-control" id="trip-destination" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" id="trip-description" rows="3" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Trip Image</label>
                            <div class="upload-zone" onclick="document.getElementById('trip-image-input').click()">
                                <i class="fas fa-cloud-upload-alt fa-2x mb-2"></i>
                                <p>Click to upload image</p>
                                <input type="file" id="trip-image-input" accept="image/*" style="display: none;" onchange="previewTripImage(this)">
                                <img id="trip-image-preview" class="img-fluid mt-2" style="display: none; max-height: 200px;">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Join Dates (comma separated)</label>
                            <input type="text" class="form-control" id="trip-join-dates" placeholder="e.g., 15 July, 22 July, 29 July">
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Difficulty Level</label>
                                    <select class="form-select" id="trip-difficulty">
                                        <option value="Easy">Easy</option>
                                        <option value="Moderate">Moderate</option>
                                        <option value="Difficult">Difficult</option>
                                        <option value="Moderate to Difficult">Moderate to Difficult</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Best Time</label>
                                    <input type="text" class="form-control" id="trip-best-time" placeholder="e.g., March to October">
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Highlights (one per line)</label>
                            <textarea class="form-control" id="trip-highlights" rows="4" placeholder="Enter each highlight on a new line"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveTrip()">
                        <i class="fas fa-save me-2"></i>Save Trip
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Admin JS -->
    <script src="js/admin.js"></script>
</body>
</html>